"use strict";var model={data:[{title:"UNSW Sydney",location:{lat:-33.917347,lng:151.2312675}},{title:"University of Sydney",location:{lat:-33.888584,lng:151.1873473}},{title:"Sydney Opera House",location:{lat:-33.8567844,lng:151.2152967}},{title:"Royal Botanic Gardens",location:{lat:-33.8641859,lng:151.2143821}},{title:"Museum of Sydney",location:{lat:-33.8661814,lng:151.2086636}},{title:"International Convention Centre Sydney",location:{lat:-33.8752151,lng:151.1992241}},{title:"Royal Randwick Racecourse",location:{lat:-33.9108925,lng:151.20318}},{title:"Bondi Beach",location:{lat:-33.8923541,lng:151.2758928}}]},initMap=void 0,map=void 0,largeInfoWindow=void 0,LocationsViewModel=function(){initMap=function(){map=new google.maps.Map(document.querySelector(".map"),{center:{lat:-33.917347,lng:151.2312675},zoom:13,mapTypeControl:!1}),largeInfoWindow=new google.maps.InfoWindow;for(var t=new google.maps.LatLngBounds,e=[],o=0;o<model.data.length;o++){var n=model.data[o].location,i=model.data[o].title,a=new google.maps.Marker({position:n,title:i,animation:google.maps.Animation.DROP});(model.data[o].marker=a).addListener("click",function(){populateInfoWindow(this,largeInfoWindow),toggleBounceWithTimeout(this,3e3)}),a.setMap(map),t.extend(a.position),e.push(a)}map.fitBounds(t)},this.searchLocation=ko.observable(""),this.locations=ko.computed(function(){var t=this.searchLocation();return""!==t?filterInput(new RegExp(t,"i")):model.data},this)};function filterInput(t){for(var e=[],o=0;o<model.data.length;o++){-1!==model.data[o].title.search(t)?(model.data[o].marker.setMap(map),e.push(model.data[o])):model.data[o].marker.setMap(null)}return e}function populateInfoWindow(t,e){e.marker!==t&&(e.marker=t,e.setContent(""),getExtraInfoFromWiki(t,e),e.open(map,t),e.addListener("closeclick",function(){e.marker=null}))}function toggleBounce(t){null!==t.getAnimation()?t.setAnimation(null):t.setAnimation(google.maps.Animation.BOUNCE)}function toggleBounceWithTimeout(t,e){toggleBounce(t),window.setTimeout(function(){toggleBounce(t)},e)}function getExtraInfoFromWiki(i,a){var t="https://en.wikipedia.org/w/api.php?action=opensearch&search="+i.title,l=void 0,r=setTimeout(function(){l="Wiki Content Could Not Be Loaded! ⛔",a.setContent("<div><strong>"+i.title+"</strong> from Wikipedia</div>"+l)},5e3);return $.ajax({url:t,data:{format:"json"},dataType:"jsonp"}).done(function(t){if(t){var e=document.createElement("ul"),o=document.createElement("li"),n=document.createElement("a");n.textContent=t[1][0],n.target="_blank",n.href=t[3][0],o.appendChild(n),e.appendChild(o),clearTimeout(r),l=e.innerHTML,a.setContent("<div><strong>"+i.title+"</strong> from Wikipedia</div>"+l)}}).fail(function(t){l="Wiki Content Could Not Be Loaded! ⛔",a.setContent("<div><strong>"+i.title+"</strong> from Wikipedia</div>"+l)}),l}LocationsViewModel.prototype.filter=function(){var t=this.searchLocation();""!==t&&(this.locations=ko.computed(function(){return filterInput(new RegExp(t,"i"))},this))},LocationsViewModel.prototype.display=function(t){populateInfoWindow(t.marker,largeInfoWindow),toggleBounceWithTimeout(t.marker,3e3)},setTimeout(function(){if(void 0===map){var t=document.querySelector(".map");t.style.margin="auto";var e=document.createElement("h1");e.style.textAlign="center",e.style.color="white",e.textContent="Could not load google map! ⛔️",t.appendChild(e)}},6e3),ko.applyBindings(new LocationsViewModel);